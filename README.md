# Automatisering av webbprojekt

* _Vad är syftet med automatiserings-processen?_

Det blir en slags avlastning för de projekt man skapar, en sammanslagning av filer. Med att automatisera kan man exempelvis sammanslå flera filers innehåll till en och samma, det går att komprimera innehåll i filer (t ex få ner bilder i storlek eller grafiska filer), det går att kopiera filer, konvertera innehåll i filer m m.

* _Vilka paket och verktyg har du använt och varför har du valt just dessa?_

Har använt Node.js för uppgiften, som kan köra Javascript på servernivå. Programmet är väldigt snabbt och effektivt, och den har ett pakethanteringssystem som heter npm. Den innehåller paket med färdig kod man kan återanvända i projekt (sk packages) och på så sätt spara tid.

Jag har använt Visual studio Code (editor) för att kunna skapa mina kataloger med filer för mitt projekt. I editorn kan man även skriva direkt i terminalen för att kunna automatisera filerna. För att kunna automatisera har jag använt mig av Gulp som har många paket i sig och är ett välutvecklat verktyg. Det är logik i koden och beskriver vad som ska hända. Med Gulp-concat har jag kunnat sammanslå JS-filer och med Gulp-uglify har jag kunnat minifiera JavaScript. Samma sak med Gulp concatCss och Gulp-uglifycss. För att slippa uppdatera webbläsaren hela tiden så fort man gör en ändring i utvecklingsfilerna, fanns ett paket för just detta som hette browserSync.

* _Beskriv systemet du skapat, hur man startar upp det och de tasks som ingår._

Jag började med att skapa min mapp för projektet, som fick heta Gulpsida. När mappen var öppen i min editro, skrev jag i terminalen för att hämta hem paketet för npm och skrev ”npm init”. Då skapades en package-lock.json-fil som håller reda på alla paket i NPM, samt en package.json-fil. Sedan ville jag installera gulp, och gjorde först en global installation där jag skrev ”sudo npm install gulp -cli -g” (sudo är för Mac Os). För att även få den lokala installationen skrev jag ”npm install gulp –save-dev”. Ville därefter initiera min git-repository genom att skriva ”git init”. Skapade sedan under min katalog, en fil som fick heta ”.gitignore” för att inte indexera node_modules i git. I källkoden för den filen skrev jag bara ”node_modules” och sparade den.

För alla koder som skrivs för att aktivera olika funktioner och tasks, behövdes en fil som jag döpte till ”gulpfile.js”. I koden ville jag hänvisa till gulp-sidan och skrev koden ”const { src, dest } = require(”gulp”);”. Sedan lagrade jag mina filer till ett objekt och skrev ”const files = { htmlPath: ”src/**/*.html” }”. Detta tar alla sökvägar för html-filer. En task gjorde jag också för att kunna kopiera över mina html-filer. För att sedan skicka den vidare till en publik fil (för kommande publiceringar i en webbplats), skrev jag i funktionen ”.pipe(dest(’pub’));”. För att kalla på html funktionen skrev jag ”exports.default = copyHTML;”.Alla utvecklingsfiler som jag ville jobba med (arbetsfiler) behövde en egen fil, som jag döpte till src i min katalog. I den skapade jag sedan flera underkataloger såsom css, js och images. Skrev även en index.html-sida, med lite källkod i (grund för startsida). Skrev sedan i terminalen ”gulp” för att kalla på min gulp-fil, och då kom min ”pub”-fil automatiskt upp samt index.html-fil. Sedan la jag till ännu en task (en watcher) som tar till sig alla förändringar man gör. Denna task la jag till i min gulp-fil. Men då behövdes även min require ändras längst upp. Lade därför till både watch, men även series (för att få allting i följd) samt en parallel. En funktion gjorde jag sedan för min watcher för att få den att fungera. Men för att få alla filer i den ordning jag ville ha, ändrade jag till series (i raden där jag kallar på funktionen) och skrev in alla funktioner i rätt ordning.

För att göra en sammanslagning av filer, behövdes en installation av gulp-concat. När denna var installerad la jag till ännu en require i gulp-filen som fick variabeln concat. En till task gjordes sedan för att sammanslå mina js-filer. Skapade en funktion som fick heta ”jsTask”, och la till en sökväg även för denna som fick heta ”jsPath”. I funktionen skapades två pipes, en för huvudkatalog för js (som fick heta main.js) samt en till pub-katalogen. När jag sedan ville kalla på funktionen la jag till parallel istället och la in mina funktioner i samma parentes, så den tar båda två direkt. Varje gång en förändring sker, så måste dessa även läggas till i tasken för watcher. Och om man vill hämta flera förändringar i samma watcher, kan man göra en array vilket jag också gjorde.

För att testa att mina js-filer fungerar och hamnar i rätt följd, testade jag att skapa två js-filer med lite källkod. Skrev gulp i terminalen, vilket ledde till att en ”main.js” fil skapades, med två koder som hamnade efter varandra i källkoden. Men för att index.html-filen också skulle ta min js-fil på den publika webbplatsen, gjorde jag även källhänvisning till den i koden. För att minifiera js-filerna behövdes en installation av ”gulp-uglify”. När denna var installerad och klar i terminalen, la jag till en require i gulp-filen som fick variabeln ”uglify”. Gjorde en pipe till i js-funktionen. Samma händelser med js, gjorde jag även med mina css-filer.

Laddade ned även paketet browserSync och satte en require på den. I alla funktioner fyllde jag sedan i ”.pipe(browserSync.stream())” sista av alla och initierade den i min watcher. För denna webbplats har jag bara gjort en enkel sida,bara för att visa hur jag fått hela systemet att fungera. Men för att skapa en grund för kommande projekt kan jag radera sedan designen för själva sidan men ha en grundsida kvar. 


* _Berätta om du lagt till något extra._

Samma funktion som jag gjorde för att kopiera mina html-filer, gjorde jag även en likadan för att föra över bildfiler.